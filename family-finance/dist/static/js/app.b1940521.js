(function(t){function e(e){for(var n,o,r=e[0],l=e[1],c=e[2],m=0,f=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"11a9":function(t,e,a){"use strict";var n=a("b1be"),i=a.n(n);i.a},1540:function(t,e,a){},"19b6":function(t,e,a){},"19e9":function(t,e,a){"use strict";var n=a("31a8"),i=a.n(n);i.a},"1dbb":function(t,e,a){},"1e7d":function(t,e,a){},"232b":function(t,e,a){},"31a8":function(t,e,a){},"3d32":function(t,e,a){"use strict";var n=a("58c5"),i=a.n(n);i.a},4239:function(t,e,a){},4973:function(t,e,a){"use strict";var n=a("cf9c"),i=a.n(n);i.a},"4b61":function(t,e,a){"use strict";var n=a("7a2f"),i=a.n(n);i.a},"4e9a":function(t,e,a){"use strict";var n=a("8ebd"),i=a.n(n);i.a},"4ec5":function(t,e,a){"use strict";var n=a("d3fa"),i=a.n(n);i.a},"4ffd":function(t,e,a){t.exports=a.p+"static/img/logo.96269d55.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:t.transitionName}},[a("router-view",{staticClass:"Router"})],1)],1)},s=[],o={name:"App",components:{},data:function(){return{transitionName:"slide-right",gengxin:0}},watch:{$route:function(){var t=this.$router.isBack;this.transitionName=t?"slide-right":"slide-left",this.$router.isBack=!1},path:function(t,e){"/home/assets"===t&&"/"===e&&(this.gengxin++,this.getServerData())},change:function(){this.getServerData()},Fchange:function(){this.getFamilyName(this.familyID)}},computed:{path:function(){return this.$route.path},uname:function(){return this.gengxin,localStorage.getItem("uname")},familyID:function(){return this.gengxin,localStorage.getItem("familyID")},change:function(){return this.$store.state.change},Fchange:function(){return this.$store.state.Fchange}},methods:{getServerData:function(){var t=this;this.axios(this.axiosConfig("get","user/userinfo",{uname:this.uname})).then((function(e){console.log(e.config.url),t.$store.commit("setServerData",{uname:t.uname,nickname:e.data.nickname,avatar:e.data.avatar,familyID:e.data.familyID}),t.getFamilyName(e.data.familyID)})).catch((function(t){console.log(t)}))},getFamilyName:function(t){var e=this;this.axios(this.axiosConfig("get","family/getinfo",{familyid:t})).then((function(t){e.$store.commit("setFamilyName",t.data.familyName)})).catch((function(t){console.log(t)}))}},created:function(){this.uname&&this.getServerData()}},r=o,l=a("2877"),c=Object(l["a"])(r,i,s,!1,null,null,null),u=c.exports,m=(a("b0c0"),a("8c4f")),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("logo"),a("div",{staticClass:"container"},[a("van-field",{staticClass:"nameInput",attrs:{clearable:"",label:" ",error:t.unameRequire,required:t.unameRequire,"left-icon":"manager",placeholder:"请输入用户名","label-width":"20px"},on:{blur:t.onUnameBlur,input:t.onUnameInput},model:{value:t.uname,callback:function(e){t.uname=e},expression:"uname"}}),a("van-field",{staticClass:"pwdInput",attrs:{clearable:"",label:" ",error:t.passwdRequire,required:t.passwdRequire,"left-icon":"lock",type:"password",placeholder:"请输入密码","label-width":"20px"},on:{blur:t.onPasswdBlur,input:t.onPasswdInput},model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}}),a("van-button",{staticClass:"btn",attrs:{color:"linear-gradient(to right, #644edd, #5fb7df)"},on:{click:t.onLogin}},[t._v("登录")]),a("van-button",{staticClass:"btn",attrs:{plain:"",type:"info"},on:{click:t.routeToRegister}},[t._v("注册")])],1)],1)},d=[],h=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("4ffd")}}),n("p",{staticClass:"slogan",staticStyle:{"margin-top":"1em"}},[t._v("家庭理财App")]),n("p",{staticClass:"slogan"},[t._v("您的家庭资产管家")])])}],v={name:"Logo"},g=v,b=(a("11a9"),Object(l["a"])(g,h,p,!1,null,null,null)),y=b.exports,C={name:"Login",components:{logo:y},data:function(){return{uname:"",passwd:"",unameRequire:!1,passwdRequire:!1,checkLogin:!1}},methods:{onUnameBlur:function(){this.uname||(this.unameRequire=!0)},onUnameInput:function(){this.uname&&(this.unameRequire=!1)},onPasswdBlur:function(){this.passwd||(this.passwdRequire=!0)},onPasswdInput:function(){this.passwd&&(this.passwdRequire=!1)},routeToHome:function(){this.unameRequire||this.passwdRequire||this.checkLogin&&this.$router.push("/home")},routeToRegister:function(){this.$router.push("/register")},onLogin:function(){var t=this;this.onUnameBlur(),this.onPasswdBlur(),this.uname&&this.passwd&&(this.$toast.loading({duration:0,message:"登录中...",forbidClick:!0,onClose:this.routeToHome}),this.axios(this.axiosConfig("post","user/login",{uname:this.uname,passwd:this.passwd})).then((function(e){console.log(e.config.url),t.checkLogin=!0,localStorage.setItem("uname",e.data.uname),e.data.familyID&&localStorage.setItem("familyID",e.data.familyID),t.$toast.clear()})).catch((function(e){console.log(e),t.$toast.clear(),t.$notify("账号或密码错误！")})))}}},k=C,x=(a("c9cc"),Object(l["a"])(k,f,d,!1,null,"7ed52ef5",null)),w=x.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("router-view"),a("van-tabbar",{attrs:{"active-color":"#644edd",route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{name:"assets",icon:"balance-o",replace:"",to:{name:"assets"}}},[t._v("资产")]),a("van-tabbar-item",{attrs:{name:"family",icon:"friends-o",replace:"",to:{name:"family"}}},[t._v("家庭")]),a("van-tabbar-item",{attrs:{name:"mine",icon:"contact",replace:"",to:{name:"mine"}}},[t._v("我")])],1)],1)},$=[],D={name:"Home",components:{},data:function(){return{active:"assets"}},created:function(){}},S=D,B=Object(l["a"])(S,_,$,!1,null,null,null),F=B.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"van-slide-right"}},[a("div",{staticClass:"Register"},[a("van-nav-bar",{attrs:{title:"用户注册","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack}}),a("van-form",{staticClass:"regForm",on:{submit:t.onSubmit}},[a("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"},{validator:t.validateUname,message:"用户名须为以字母开头由字母和数字组成的6-8位字符"},{validator:t.asyncValidateUnameExist,message:"该用户名已被使用"}]},model:{value:t.uname,callback:function(e){t.uname=e},expression:"uname"}}),a("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称",rules:[{required:!0,message:"请填写昵称"},{validator:t.validateNickname,message:"昵称不能超过10个字符"}]},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),a("van-field",{attrs:{name:"uploader",label:"头像"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{multiple:"","max-count":1,"before-read":t.beforeRead,"after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})]},proxy:!0}])}),a("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请输入密码"},{validator:t.validatePasswd,message:"密码须为由字母和数字组成的6-15位字符"}]},model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}}),a("van-field",{attrs:{type:"password",name:"确认密码",label:"确认密码",placeholder:"确认密码",rules:[{required:!0,message:"请再次输入密码"},{validator:t.validateRePasswd,message:"两次输入的密码不一致"}]},model:{value:t.reTypePasswd,callback:function(e){t.reTypePasswd=e},expression:"reTypePasswd"}}),a("div",{staticStyle:{margin:"16px 32px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("立即注册")])],1)],1)],1)])},I=[],P=(a("d3b7"),a("96cf"),a("1da1")),R=a("bc3a"),j=a.n(R),O=a("d399");function A(t){var e=new FormData;e.append("avatar",t);var a={headers:{"Content-Type":"multipart/form-data"}};return new Promise((function(t,n){j.a.post(j.a.defaults.baseURL+"/upload",e,a).then((function(e){e&&e.data&&200===e.data.status?t(e.data):(O["a"].fail(e.data&&e.data.msg),n(e.data))})).catch((function(t){O["a"].fail("图片上传失败"),n(t)}))}))}var E=A,q={name:"Register",components:{},data:function(){return{uname:"",nickname:"",passwd:"",reTypePasswd:"",avatar:"",fileList:[],imgFile:null}},methods:{onClickBack:function(){this.$router.goBack()},onSubmit:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$toast.loading({duration:0,message:"请稍后...",forbidClick:!0}),!t.imgFile){e.next=4;break}return e.next=4,E(t.imgFile).then((function(e){t.avatar=e.url}));case 4:t.requestReg().then((function(){t.$toast.clear(),t.$dialog.alert({message:"注册成功，请返回进行登录",confirmButtonText:"返回登录"}).then((function(){t.$router.goBack()}))})).catch((function(t){console.log(t)}));case 5:case"end":return e.stop()}}),e)})))()},beforeRead:function(t){return"image/jpeg"===t.type||"image/png"===t.type||(this.$toast("只允许上传jpg/png格式的图片！"),!1)},afterRead:function(t){this.imgFile=t.file},requestReg:function(){return this.axios(this.axiosConfig("post","user/reg",{uname:this.uname,passwd:this.passwd,nickname:this.nickname,avatar:this.avatar}))},asyncValidateUnameExist:function(t){var e=this;return new Promise((function(a){e.axios(e.axiosConfig("get","user/check_uname_exist",{uname:t})).then((function(t){a(!t.data)})).catch((function(t){console.log(t)}))}))},validateUname:function(t){return/^[a-zA-Z][a-zA-Z0-9]{5,11}$/.test(t)},validatePasswd:function(t){return/^[a-zA-Z0-9]{6,15}$/.test(t)},validateRePasswd:function(t){return t===this.passwd},validateNickname:function(t){return t.length<=10}}},L=q,z=(a("bffd"),Object(l["a"])(L,N,I,!1,null,"724b55c8",null)),T=z.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assets"},[a("assets-header",{on:{PClick:t.BartoPersonal,FClick:t.BartoFamily}}),a("div",{staticClass:"page-container"},[t.PersonalpageShow?a("personal-page"):a("family-page")],1)],1)},U=[],X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("p",{staticClass:"title",class:{active:t.isActive},on:{click:t.personalClick}},[t._v("个人")]),a("p",{staticClass:"title",class:{active:!t.isActive},on:{click:t.familyClick}},[t._v("家庭")])])},H=[],W={name:"Header",data:function(){return{}},computed:{isActive:function(){return!this.$route.hash}},methods:{personalClick:function(){this.$emit("PClick")},familyClick:function(){this.$emit("FClick")}}},Z=W,V=(a("59e7"),Object(l["a"])(Z,X,H,!1,null,"192b4d22",null)),Y=V.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"PersonalPage"},[a("assets-card",{attrs:{color:"#fb5059",icon:"gold-coin",title:"个人资产",value:t.amount},on:{XClick:t.clickAssets}}),a("assets-card",{attrs:{color:"#644edd",icon:"bill",title:"个人账单"},on:{XClick:t.clickBill}}),a("assets-card",{attrs:{color:"#f88b0e",icon:"add",title:"记一笔"},on:{XClick:t.doMakeBill}})],1)},G=[],K=(a("b680"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"assets-card margin-top-10px",style:t.bgColor,on:{click:t.onClick}},[a("div",{staticClass:"icon-container"},[a("van-icon",{staticClass:"icon",attrs:{name:t.icon,color:t.bgColor.borderColor,size:"20px"}})],1),a("span",{staticClass:"title"},[t._v(t._s(t.title))]),t.value?a("span",{staticClass:"value"},[t._v("￥"+t._s(t.value))]):t._e()])}),Q=[],tt=a("6929"),et=a.n(tt),at={name:"AssetsCard",props:{color:{type:String},icon:{type:String},title:{type:String},value:{type:String}},data:function(){return{}},computed:{colorObject:function(){return et()(this.color)},bgColor:function(){return{borderColor:this.colorObject.darken(.1).hex(),backgroundColor:this.colorObject.hex()}}},methods:{onClick:function(){this.$emit("XClick")}}},nt=at,it=(a("9c3a"),Object(l["a"])(nt,K,Q,!1,null,"4e0ed528",null)),st=it.exports,ot={name:"PersonalPage",components:{AssetsCard:st},data:function(){return{amount:""}},methods:{clickAssets:function(){console.log("资产")},clickBill:function(){this.$router.push("/personalbill")},doMakeBill:function(){this.$router.push("/acountingpage?type=personal")}},created:function(){var t=this;this.axios(this.axiosConfig("get","uassets/getamount",{uname:this.$store.state.uname})).then((function(e){e.data.amount&&(t.amount=e.data.amount.toFixed(2))}))}},rt=ot,lt=Object(l["a"])(rt,J,G,!1,null,"0ac248dc",null),ct=lt.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FamilyPage"},[a("assets-card",{attrs:{color:"#36d7b7",icon:"gold-coin",title:"家庭资产",value:t.amount},on:{XClick:t.clickAssets}}),a("assets-card",{attrs:{color:"#007acc",icon:"bill",title:"家庭账单"},on:{XClick:t.clickBill}}),a("assets-card",{attrs:{color:"#dd5246",icon:"add",title:"记一笔"},on:{XClick:t.doMakeBill}})],1)},mt=[],ft={name:"FamilyPage",components:{AssetsCard:st},data:function(){return{amount:""}},methods:{clickAssets:function(){console.log("资产")},clickBill:function(){this.$router.push("/familybill")},doMakeBill:function(){this.$router.push("/acountingpage?type=family")}},created:function(){var t=this;this.axios(this.axiosConfig("get","fassets/getamount",{familyid:this.$store.state.familyID})).then((function(e){e.data.amount&&(t.amount=e.data.amount.toFixed(2))}))}},dt=ft,ht=Object(l["a"])(dt,ut,mt,!1,null,"1d9c56e8",null),pt=ht.exports,vt={name:"Assets",components:{AssetsHeader:Y,PersonalPage:ct,FamilyPage:pt},data:function(){return{}},computed:{PersonalpageShow:function(){return!this.$route.hash}},methods:{BartoPersonal:function(){this.$router.push("/home/assets")},BartoFamily:function(){this.$router.push("/home/assets#2")}}},gt=vt,bt=(a("4b61"),Object(l["a"])(gt,M,U,!1,null,"09f301c4",null)),yt=bt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"family"},[a("my-header",{attrs:{title:t.headerTitle}}),t.familyID?a("div",{staticClass:"hasFamily"},[a("van-button",{directives:[{name:"to",rawName:"v-to",value:{path:"/familybill"},expression:"{ path:'/familybill' }"}],staticClass:"hasFaButton",attrs:{block:"",color:"linear-gradient(to right, #644edd, #5fb7df)"}},[t._v("家庭账单")]),a("van-button",{directives:[{name:"to",rawName:"v-to",value:{path:"/familymembers"},expression:"{ path:'/familymembers' }"}],staticClass:"hasFaButton",attrs:{block:"",color:"linear-gradient(to right, #e92758, #ff9569)"}},[t._v("家庭成员")]),a("van-button",{directives:[{name:"to",rawName:"v-to",value:{path:"/familymanage"},expression:"{ path:'/familymanage' }"}],staticClass:"hasFaButton",attrs:{block:"",color:"linear-gradient(to right, #e65c00, #F9D423)"}},[t._v("家庭管理")])],1):a("div",{staticClass:"noFamily"},[a("van-button",{directives:[{name:"to",rawName:"v-to",value:{path:"/createfamily"},expression:"{ path:'/createfamily' }"}],staticClass:"noFaButton",attrs:{block:"",color:"linear-gradient(to right, #644edd, #5fb7df)"}},[t._v("创建家庭")]),a("van-button",{directives:[{name:"to",rawName:"v-to",value:{path:"/bindfamily"},expression:"{ path:'/bindfamily' }"}],staticClass:"noFaButton",attrs:{block:"",color:"linear-gradient(to right, #e92758, #ff9569)"}},[t._v("绑定家庭")])],1)],1)},kt=[],xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("p",{staticClass:"title"},[t._v(t._s(this.title))])])},wt=[],_t={name:"Header",props:{title:{type:String}}},$t=_t,Dt=(a("755a"),Object(l["a"])($t,xt,wt,!1,null,"f1ec5a52",null)),St=Dt.exports,Bt={name:"Family",data:function(){return{}},computed:{familyID:function(){return localStorage.getItem("familyID")},headerTitle:function(){return this.familyID?this.$store.state.familyName:"家庭"}},components:{myHeader:St},methods:{getFamilyData:function(){this.axios({method:"get",url:"family"}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}},created:function(){},directives:{to:{inserted:function(t,e,a){t.onclick=function(){a.fnContext.$router.push(e.value.path)}}}}},Ft=Bt,Nt=(a("8f75"),Object(l["a"])(Ft,Ct,kt,!1,null,"2416a479",null)),It=Nt.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mine"},[a("my-header",{attrs:{title:"我"}}),a("info-card",{staticClass:"info",on:{Xclick:t.clickInfo}}),a("van-cell",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"通知",icon:"chat-o","is-link":""},on:{click:t.notice}}),a("van-cell",{attrs:{title:"设置",icon:"setting-o","is-link":"",to:{name:"Setting"}}})],1)},Rt=[],jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"info-card",on:{click:t.handleClick}},[a("van-image",{staticClass:"avatar",attrs:{round:"",width:"65",height:"65",fit:"cover",src:t.avatar}}),a("div",{staticClass:"name"},[a("span",{staticClass:"nickname"},[t._v(t._s(t.nickname))]),a("span",{staticClass:"uname"},[t._v(t._s(t.uname))])]),a("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1)},Ot=[],At={name:"infoCard",data:function(){return{}},methods:{handleClick:function(){this.$emit("Xclick")}},computed:{nickname:function(){return this.$store.state.nickname},uname:function(){return this.$store.state.uname},avatar:function(){return this.$store.state.avatar}}},Et=At,qt=(a("3d32"),Object(l["a"])(Et,jt,Ot,!1,null,"5172ba1e",null)),Lt=qt.exports,zt={name:"Mine",components:{myHeader:St,infoCard:Lt},methods:{clickInfo:function(){this.$router.push("/userinfo")},notice:function(){this.$toast({message:"暂无通知",position:"bottom"})}}},Tt=zt,Mt=(a("a9c7"),Object(l["a"])(Tt,Pt,Rt,!1,null,"ff8f1c0c",null)),Ut=Mt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setting"},[a("van-nav-bar",{attrs:{title:"设置","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack}}),a("div",{staticClass:"container"},[a("van-cell",{staticClass:"account",attrs:{title:"账号与安全","is-link":"",to:{name:"Account"}}}),a("van-cell-group",[a("van-cell",{attrs:{title:"关于","is-link":"",to:{name:"About"}}}),a("van-cell",{attrs:{title:"检查更新","is-link":""},on:{click:t.checkUpdate}})],1),a("div",{staticClass:"loginOut",on:{click:t.logOut}},[a("span",{staticClass:"loginOutBtn"},[t._v("退出登录")])])],1)],1)},Ht=[],Wt={name:"Setting",methods:{onClickBack:function(){this.$router.goBack()},checkUpdate:function(){this.$toast({message:"当前已是最新版本",position:"bottom"})},logOut:function(){var t=this;this.$dialog.confirm({title:"提示",message:"确定退出登录吗？"}).then((function(){localStorage.removeItem("uname"),localStorage.removeItem("familyID"),t.$router.push("/")}))}}},Zt=Wt,Vt=(a("81a0"),Object(l["a"])(Zt,Xt,Ht,!1,null,"14c07f16",null)),Yt=Vt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("van-nav-bar",{attrs:{title:"关于","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack}}),a("logo"),t._m(0)],1)},Gt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"copyright"},[a("p",{staticClass:"copyright-text"},[t._v("计算机171徐小武 版权所有")]),a("p",{staticClass:"copyright-text"},[t._v("Copyright © 2017-2020 Xiaowu.")]),a("p",{staticClass:"copyright-text"},[t._v("All Right Reserved.")])])}],Kt={name:"About",components:{logo:y},methods:{onClickBack:function(){this.$router.goBack()}}},Qt=Kt,te=(a("4e9a"),Object(l["a"])(Qt,Jt,Gt,!1,null,"22686080",null)),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account"},[a("van-nav-bar",{attrs:{title:"账号与安全","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack}}),a("van-cell-group",{staticStyle:{"margin-top":"10px"}},[a("van-cell",{attrs:{title:"修改密码","is-link":"",to:{name:"ChangePasswd"}}}),a("van-cell",{attrs:{title:"注销账号","is-link":""},on:{click:t.RemoveAccount}})],1)],1)},ne=[],ie={name:"Account",methods:{onClickBack:function(){this.$router.goBack()},RemoveAccount:function(){this.$toast({message:"暂不支持注销账号",position:"bottom"})}}},se=ie,oe=(a("5be2"),Object(l["a"])(se,ae,ne,!1,null,"8bca2cee",null)),re=oe.exports,le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ChangePasswd"},[a("van-nav-bar",{attrs:{title:"修改密码","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-button",{attrs:{type:"primary",size:"mini",color:"#644edd"},on:{click:t.onComplete}},[t._v("完成")])]},proxy:!0}])}),a("van-form",{ref:"chPwdForm",staticClass:"chPwdForm",on:{submit:t.onSubmit}},[a("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:t.uname,disabled:""}}),a("van-field",{attrs:{type:"password",name:"原密码",label:"原密码",placeholder:"填写原密码",rules:[{required:!0,message:"请填写原密码"}]},model:{value:t.oldPasswd,callback:function(e){t.oldPasswd=e},expression:"oldPasswd"}}),a("van-field",{attrs:{type:"password",name:"新密码",label:"新密码",placeholder:"填写新密码",rules:[{required:!0,message:"请填写新密码"},{validator:t.validatePasswd,message:"密码须为由字母和数字组成的6-15位字符"}]},model:{value:t.passwd,callback:function(e){t.passwd=e},expression:"passwd"}}),a("van-field",{attrs:{type:"password",name:"确认密码",label:"确认密码",placeholder:"再次填写确认",rules:[{required:!0,message:"请再次填写确认"},{validator:t.validateRePasswd,message:"两次输入的密码不一致"}]},model:{value:t.reTypePasswd,callback:function(e){t.reTypePasswd=e},expression:"reTypePasswd"}})],1)],1)},ce=[],ue={name:"ChangePasswd",data:function(){return{oldPasswd:"",passwd:"",reTypePasswd:"",checkResult:!1}},computed:{uname:function(){return this.$store.state.uname}},methods:{onClickBack:function(){this.$router.goBack()},onSubmit:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.checkOldPasswd();case 2:!0===t.checkResult?t.uploadChange():"error"===t.checkResult?t.$toast({type:"fail",message:"系统错误"}):t.$dialog.alert({message:"原密码不正确"});case 3:case"end":return e.stop()}}),e)})))()},onComplete:function(){this.$refs.chPwdForm.submit()},checkOldPasswd:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.axios(t.axiosConfig("get","user/check_old_passwd",{uname:t.uname,oldpasswd:t.oldPasswd})).then((function(e){console.log(e),t.checkResult=e.data})).catch((function(e){console.log(e),t.checkResult="error"}));case 2:case"end":return e.stop()}}),e)})))()},uploadChange:function(){var t=this;this.axios(this.axiosConfig("post","user/update_passwd",{uname:this.uname,passwd:this.passwd})).then((function(e){console.log(e);var a=e.data;a&&t.$dialog.alert({message:"密码修改成功，请重新登录"}).then((function(){localStorage.removeItem("uname"),t.$router.push("/")}))})).catch((function(e){console.log(e),t.$toast({type:"fail",message:"系统错误"})}))},validatePasswd:function(t){return/^[a-zA-Z0-9]{6,15}$/.test(t)},validateRePasswd:function(t){return t===this.passwd}}},me=ue,fe=(a("4973"),Object(l["a"])(me,le,ce,!1,null,"e7d16fd0",null)),de=fe.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userInfo"},[a("van-nav-bar",{attrs:{title:"修改个人信息","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack}}),a("van-form",{staticClass:"margin-top-10px",on:{submit:t.onSubmit}},[a("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称",rules:[{required:!0,message:"请填写昵称"},{validator:t.validateNickname,message:"昵称不能超过8个字符"}]},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),a("van-field",{attrs:{name:"uploader",label:"头像"},scopedSlots:t._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{multiple:"","max-count":1,"before-read":t.beforeRead,"after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})]},proxy:!0}])}),a("div",{staticStyle:{margin:"16px 32px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("保存修改")])],1)],1)],1)},pe=[],ve={name:"UserInfo",data:function(){return{fileList:this.avatarUrl(),imgFile:{},isChangeImg:!1,isChangeNickname:!1,newAvatar:"",nickname:""}},methods:{onClickBack:function(){this.$router.goBack()},avatarUrl:function(){return[{url:this.$store.state.avatar,isImage:!0}]},beforeRead:function(t){return"image/jpeg"===t.type||"image/png"===t.type||(this.$toast("只允许上传jpg/png格式的图片！"),!1)},afterRead:function(t){this.imgFile=t.file,this.isChangeImg=!0},onSubmit:function(){var t=this;return Object(P["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isChangeNickname||t.isChangeImg){e.next=2;break}return e.abrupt("return");case 2:if(!t.imgFile||!t.isChangeImg){e.next=5;break}return e.next=5,E(t.imgFile).then((function(e){t.newAvatar=e.url})).catch((function(t){console.log(t)}));case 5:t.requestChange().then((function(e){console.log(e),e.data?t.$dialog.alert({message:"修改成功",confirmButtonText:"确定"}).then((function(){t.$store.commit("change")})):t.$toast.fail(e.data.msg||"系统错误")})).catch((function(t){console.log(t)}));case 6:case"end":return e.stop()}}),e)})))()},requestChange:function(){return this.axios(this.axiosConfig("post","user/update_info",{uname:this.$store.state.uname,nickname:this.nickname,avatar:this.newAvatar}))},validateNickname:function(t){return t.length<=8}},watch:{nickname:function(){this.isChangeNickname=!0}},created:function(){this.nickname=this.$store.state.nickname}},ge=ve,be=(a("be02"),Object(l["a"])(ge,he,pe,!1,null,"5dab8592",null)),ye=be.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bill"},[a("my-nav-bar",{attrs:{title:"家庭账单",fixed:""}}),a("div",{staticClass:"container"},t._l(t.familyData,(function(t,e){return a("bill-card",{key:e,attrs:{FData:t}})})),1)],1)},ke=[],xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-nav-bar",{attrs:{fixed:t.fixed,title:t.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack}})},we=[],_e={name:"MyNavBar",props:{title:{type:String,default:"标题"},fixed:{type:Boolean,default:!1}},methods:{onClickBack:function(){this.$router.goBack()}}},$e=_e,De=Object(l["a"])($e,xe,we,!1,null,null,null),Se=De.exports,Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bill-card margin-top-10px"},[a("span",{staticClass:"date"},[t._v(t._s(t.FData.date||t.PData.date))]),t._l(t.FData.item,(function(e,n){return a("div",{key:n,staticClass:"family-card",class:{"van-hairline--bottom":n<t.FData.item.length-1}},[a("van-image",{staticClass:"avatar",attrs:{width:"35px",height:"35px",round:"",fit:"cover",src:e.avatar}}),a("div",{staticClass:"info"},[a("span",{staticClass:"name"},[t._v(t._s(e.name))]),a("span",{staticClass:"beizhu van-ellipsis"},[t._v(t._s(e.beizhu))])]),a("span",{staticClass:"spending"},[t._v("￥"+t._s(e.spending))])],1)})),t._l(t.PData.item,(function(e,n){return a("div",{key:n,staticClass:"personal-card",class:{"van-hairline--bottom":n<t.PData.item.length-1}},[a("span",{staticClass:"beizhu van-ellipsis"},[t._v(t._s(e.beizhu))]),a("span",{staticClass:"spending"},[t._v("￥"+t._s(e.spending))])])}))],2)},Fe=[],Ne={name:"BillCard",props:{FData:{type:Object,default:function(){return{item:[]}}},PData:{type:Object,default:function(){return{item:[]}}}}},Ie=Ne,Pe=(a("b973"),Object(l["a"])(Ie,Be,Fe,!1,null,"3af229d2",null)),Re=Pe.exports,je={name:"FamilyBill",components:{MyNavBar:Se,BillCard:Re},data:function(){return{familyData:[]}},created:function(){var t=this;this.axios(this.axiosConfig("get","fassets/getbill",{familyid:this.$store.state.familyID})).then((function(e){"no results"!==e.data?t.familyData=e.data:t.$toast.fail(e.data)})).catch((function(e){t.$toast.fail(e)}))}},Oe=je,Ae=(a("a517"),Object(l["a"])(Oe,Ce,ke,!1,null,"57e06388",null)),Ee=Ae.exports,qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bind"},[a("van-search",{attrs:{"show-action":"",placeholder:"请输入家庭编号"},on:{search:t.onSearch,cancel:t.onCancel,input:t.onChange},model:{value:t.searchContext,callback:function(e){t.searchContext=e},expression:"searchContext"}}),t.buttonShow?a("search-button",{attrs:{context:t.searchContext},on:{XClick:t.doSearch}}):t._e(),t.hasResultShow?a("div",{staticClass:"hasResult margin-top-10px"},[a("van-icon",{staticClass:"home-icon",attrs:{name:"wap-home",size:"20px",color:"#5fb7df"}}),a("span",{staticClass:"homeName"},[t._v(t._s(t.familyName))]),a("van-button",{staticClass:"bind-button",attrs:{size:"small",color:"#644edd"},on:{click:t.doBind}},[t._v("立即绑定")])],1):t._e(),t.noResultShow?a("div",{staticClass:"noResult margin-top-10px"},[a("p",{staticClass:"noResultText"},[t._v("该家庭不存在")])]):t._e()],1)},Le=[],ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchButton margin-top-10px",on:{click:t.onClick}},[a("div",{staticClass:"icon-container"},[a("van-icon",{staticClass:"icon-item",attrs:{name:"friends-o",color:"#ffffff",size:"24px"}})],1),a("span",{staticClass:"search-tips"},[t._v("查找：")]),a("span",{staticClass:"search-text"},[t._v(t._s(t.context))])])},Te=[],Me={name:"searchButton",props:{context:{default:""}},methods:{onClick:function(){this.$emit("XClick")}}},Ue=Me,Xe=(a("a40f"),Object(l["a"])(Ue,ze,Te,!1,null,"14dc2236",null)),He=Xe.exports,We={name:"BindFamily",components:{searchButton:He},data:function(){return{searchContext:"",buttonShow:!1,hasResultShow:!1,noResultShow:!1,familyID:"",familyName:""}},methods:{onSearch:function(t){this.buttonShow=!1,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.searchAjax(t)},onCancel:function(){this.$router.goBack()},onChange:function(){this.buttonShow=!!this.searchContext,this.noResultShow=!1,this.hasResultShow=!1},doSearch:function(){this.onSearch(this.searchContext)},doBind:function(){this.bindAjax()},searchAjax:function(t){var e=this;this.axios(this.axiosConfig("get","/family/getinfo",{familyid:t})).then((function(t){if(!t.data||!t.data.familyName)return Promise.reject(new Error("no result"));e.familyName=t.data.familyName,e.familyID=t.data.familyID,e.$toast.clear(),e.hasResultShow=!0})).catch((function(t){console.log(t),e.$toast.clear(),e.noResultShow=!0}))},bindAjax:function(){var t=this;this.axios(this.axiosConfig("post","/family/bind",{uname:this.$store.state.uname,familyid:this.familyID})).then((function(e){if(console.log(e),!e.data)return Promise.reject(new Error("res send a false"));t.$toast.success("绑定成功"),localStorage.setItem("familyID",t.familyID),t.$store.commit("change"),t.$store.commit("Fchange"),t.$router.goBack()})).catch((function(e){console.log(e),t.$toast.fail("绑定失败")}))}}},Ze=We,Ve=(a("19e9"),Object(l["a"])(Ze,qe,Le,!1,null,"b28cb6d6",null)),Ye=Ve.exports,Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create"},[a("my-nav-bar-with-right-button",{attrs:{title:"创建家庭","button-context":"创建"},on:{XClick:t.onCreate}}),a("van-form",{ref:"CreateFamilyForm",staticClass:"margin-top-10px",on:{submit:t.onSbumit}},[a("van-field",{attrs:{name:"家庭名称",label:"家庭名称",placeholder:"填写家庭名称",rules:[{required:!0,message:"请填写家庭名称"},{validator:t.validateFamilyName,message:"家庭名称不能超过8个字符"}]},model:{value:t.familyName,callback:function(e){t.familyName=e},expression:"familyName"}})],1)],1)},Ge=[],Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-nav-bar",{attrs:{fixed:t.fixed,title:t.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.onClickBack},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-button",{attrs:{type:"primary",size:"mini",color:"#644edd"},on:{click:t.onComplete}},[t._v(t._s(t.buttonContext))])]},proxy:!0}])})},Qe=[],ta={name:"MyNavBar",props:{title:{type:String,default:"标题"},fixed:{type:Boolean,default:!1},buttonContext:{type:String,default:"确定"}},methods:{onClickBack:function(){this.$router.goBack()},onComplete:function(){this.$emit("XClick")}}},ea=ta,aa=(a("c8e2"),Object(l["a"])(ea,Ke,Qe,!1,null,"e7b8633a",null)),na=aa.exports,ia={name:"CreateFamily",components:{MyNavBarWithRightButton:na},data:function(){return{familyName:""}},methods:{onCreate:function(){console.log("create"),this.$refs.CreateFamilyForm.submit()},validateFamilyName:function(t){return t.length<=8},onSbumit:function(){var t=this;this.axios(this.axiosConfig("post","family/create",{creator:this.$store.state.uname,familyname:this.familyName})).then((function(e){console.log(e),e.data.familyID&&!e.data.err?(t.$toast.success("创建成功"),localStorage.setItem("familyID",e.data.familyID),t.$store.commit("change"),t.$store.commit("Fchange"),t.$router.push("/home/family")):t.$toast.fail("创建失败")})).catch((function(e){console.log(e),t.$toast.fail("系统错误")}))}}},sa=ia,oa=(a("7650"),Object(l["a"])(sa,Je,Ge,!1,null,"ab52d308",null)),ra=oa.exports,la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manage"},[a("my-nav-bar",{attrs:{title:"家庭管理"}}),a("van-cell-group",{staticClass:"margin-top-10px"},[a("van-cell",{attrs:{title:"家庭名称",value:t.familyName,"is-link":""},on:{click:t.openNameDialog}}),a("van-cell",{attrs:{title:"家庭编号",value:t.familyID,"is-link":""},on:{click:t.openIdDialog}}),a("van-cell",{attrs:{title:"取消绑定家庭","is-link":""},on:{click:t.openUnBindDialog}})],1),a("van-dialog",{attrs:{title:"修改家庭名称","show-cancel-button":"","close-on-popstate":"","before-close":t.beforeNameClose},model:{value:t.NameDialogShow,callback:function(e){t.NameDialogShow=e},expression:"NameDialogShow"}},[a("van-form",{ref:"NameForm",staticClass:"FamilyNameForm",on:{submit:t.FamilyNameSubmit,failed:t.onNameSubmitFailed}},[a("van-field",{staticClass:"FamilyNameField",attrs:{name:"家庭名称",placeholder:"填写家庭名称",clearable:"",rules:[{required:!0,message:"请填写家庭名称"},{validator:t.validateFamilyname,message:"家庭名称不能超过8个字符"}]},model:{value:t.familyName,callback:function(e){t.familyName=e},expression:"familyName"}})],1)],1),a("van-dialog",{attrs:{title:"提示","close-on-popstate":"","show-cancel-button":""},on:{confirm:t.onUnBindConfirm},model:{value:t.unBindDialogShow,callback:function(e){t.unBindDialogShow=e},expression:"unBindDialogShow"}},[a("div",{staticClass:"unBindDialogContainer"},[a("span",[t._v("是否取消与")]),a("span",{staticClass:"fnameText"},[t._v(t._s(t.familyName))]),a("span",[t._v("的绑定")])])])],1)},ca=[],ua={name:"FamilyManage",components:{MyNavBar:Se},data:function(){return{familyName:"",familyID:"",NameDialogShow:!1,unBindDialogShow:!1,isFamilyNameChanged:!1,done:function(){}}},methods:{openNameDialog:function(){this.NameDialogShow=!0},openIdDialog:function(){var t=this;this.$dialog.alert({title:"家庭编号",message:this.familyID,confirmButtonText:"复制家庭编号"}).then((function(){t.copy(t.familyID)}))},openUnBindDialog:function(){this.unBindDialogShow=!0},copy:function(t){var e=function(e){e.clipboardData.setData("text/plain",t),e.preventDefault()};return document.addEventListener("copy",e),document.execCommand("copy")},validateFamilyname:function(t){return t.length<=8},FamilyNameSubmit:function(){var t=this;this.axios(this.axiosConfig("post","family/update_name",{familyid:this.familyID,familyname:this.familyName})).then((function(e){if(console.log(e),!e.data)return new Promise(new Error("res send a false"));t.$toast({message:"修改成功",position:"bottom"}),t.$refs.NameForm.resetValidation(),t.$store.commit("change"),t.$store.commit("Fchange"),t.done()})).catch((function(e){console.log(e),t.$toast({message:"系统错误",position:"bottom"}),t.done(!1)}))},onNameSubmitFailed:function(){this.done(!1)},beforeNameClose:function(t,e){if(this.done=e,"cancel"===t)return this.$refs.NameForm.resetValidation(),void e();this.isFamilyNameChanged?this.$refs.NameForm.submit():e(!1)},onUnBindConfirm:function(){var t=this;this.axios(this.axiosConfig("post","/family/unbind",{uname:this.$store.state.uname,familyid:this.familyID})).then((function(e){if(console.log(e),!e.data)return Promise.reject(new Error("some errors"));t.$toast({message:"取消绑定成功",position:"bottom"}),localStorage.removeItem("familyID"),t.$router.push("/home/family")})).catch((function(e){console.log(e),t.$toast({message:"系统错误",position:"bottom"})}))}},watch:{familyName:function(){this.isFamilyNameChanged=!0}},created:function(){this.familyName=this.$store.state.familyName,this.familyID=this.$store.state.familyID}},ma=ua,fa=(a("4ec5"),Object(l["a"])(ma,la,ca,!1,null,"11f55b67",null)),da=fa.exports,ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"members"},[a("my-nav-bar",{attrs:{title:"家庭成员",fixed:!0,buttonContext:"邀请"},on:{XClick:t.onClickBtn}}),a("van-list",{staticClass:"memberList",attrs:{finished:t.finished},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-swipe-cell",{staticClass:"memberCell van-hairline--bottom",attrs:{disabled:""}},[a("div",{staticClass:"memberInfo"},[a("van-image",{staticClass:"memberAvatar",attrs:{round:"",width:"35",height:"35",fit:"cover",src:t.meData.avatar}}),a("span",{staticClass:"memberName"},[t._v(t._s(t.meData.nickname))]),a("span",{staticClass:"me"},[t._v("创建者")])],1)]),t._l(t.memberList,(function(e,n){return a("van-swipe-cell",{key:n,staticClass:"memberCell van-hairline--bottom",attrs:{index:n,uname:e.uname,disabled:!t.canRemove,"before-close":t.beforeClose},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-button",{staticClass:"delete-button",attrs:{square:"",type:"danger",text:"移除"}})]},proxy:!0}],null,!0)},[a("div",{staticClass:"memberInfo"},[a("van-image",{staticClass:"memberAvatar",attrs:{round:"",width:"35",height:"35",fit:"cover",src:e.avatar}}),a("span",{staticClass:"memberName"},[t._v(t._s(e.nickname))])],1)])}))],2)],1)},pa=[],va=(a("a434"),{name:"FamilyMembers",components:{MyNavBar:na},data:function(){return{memberList:[],loading:!0,finished:!1,meData:{uname:"",avatar:"",name:""}}},computed:{canRemove:function(){return this.meData.uname===this.$store.state.uname}},methods:{LoadData:function(){var t=this;this.axios(this.axiosConfig("get","family/getmembers",{familyid:this.$store.state.familyID})).then((function(e){console.log(e),t.memberList=e.data,t.meData=t.memberList.splice(0,1)[0],t.loading=!1,t.finished=!0})).catch((function(t){console.log(t)})),this.loading=!1,this.finished=!0},beforeClose:function(t){var e=this,a=t.position,n=t.instance,i=n.$el.attributes[2].value,s=n.$el.attributes[3].value;switch(a){case"left":case"cell":case"outside":n.close();break;case"right":this.$dialog.confirm({message:"确定移除该成员吗？"}).then((function(){n.close(),e.removeMember(i,s)})).catch((function(){}));break}},removeMember:function(t,e){this.memberList.splice(t,1),console.log(e),this.axios({method:"post",url:"family/unbind",data:{uname:e,familyid:this.$store.state.familyID}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},onClickBtn:function(){var t=this,e=this.$store.state.familyID;this.$dialog.alert({title:"通过家庭编号邀请",message:e,confirmButtonText:"复制家庭编号"}).then((function(){t.copy(e)}))},copy:function(t){var e=function(e){e.clipboardData.setData("text/plain",t),e.preventDefault()};return document.addEventListener("copy",e),document.execCommand("copy")},validateFamilyname:function(t){return t.length<=8}},created:function(){this.LoadData()}}),ga=va,ba=(a("66dd"),Object(l["a"])(ga,ha,pa,!1,null,"1ba9533d",null)),ya=ba.exports,Ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accounting"},[a("div",{staticClass:"header van-hairline--bottom"},[a("div",{staticClass:"tab"},[a("div",{staticClass:"left-tab",class:{active:t.isActive},on:{click:t.toIncome}},[t._v("收入")]),a("div",{staticClass:"right-tab",class:{active:!t.isActive},on:{click:t.toSpending}},[t._v("支出")])]),a("van-icon",{staticClass:"close",attrs:{name:"close",size:"20px",color:"#565656"},on:{click:t.close}})],1),a("accounting-comp",{attrs:{toWhere:t.toWhere,type:t.type}})],1)},ka=[],xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accounting-comp"},[a("van-form",{ref:"AForm",on:{submit:t.onSubmit}},[a("van-field",{attrs:{label:"金额","label-width":"70",readonly:"",clickable:""},nativeOn:{touchstart:function(e){e.stopPropagation(),t.show=!0}},scopedSlots:t._u([{key:"input",fn:function(){return[t.amounting?a("span",{staticClass:"input-span"},[t._v("￥"+t._s(t.amounting))]):a("span",{staticClass:"input-placeholder"},[t._v("输入金额")])]},proxy:!0},{key:"left-icon",fn:function(){return[a("van-icon",{staticClass:"right-5px",attrs:{name:"gold-coin",size:"24px",color:"#4a79e5"}})]},proxy:!0}])}),a("van-field",{attrs:{label:"备注",placeholder:"填写备注","label-width":"70","input-align":"right","error-message-align":"right",rules:[{required:!0,message:"请填写备注"},{validator:t.validateBeizhu,message:"备注不能超过15个字符"}]},on:{focus:function(e){t.show=!1}},scopedSlots:t._u([{key:"left-icon",fn:function(){return[a("van-icon",{staticClass:"right-5px",attrs:{name:"label",size:"24px",color:"#ed9142"}})]},proxy:!0}]),model:{value:t.beizhu,callback:function(e){t.beizhu=e},expression:"beizhu"}}),a("van-field",{attrs:{value:t.date,label:"日期","label-width":"70","input-align":"right","error-message-align":"right",placeholder:"选择日期",readonly:"",clickable:"",rules:[{required:!0,message:"请选择日期"}]},nativeOn:{touchstart:function(e){return e.stopPropagation(),t.clickDate(e)}},scopedSlots:t._u([{key:"left-icon",fn:function(){return[a("van-icon",{staticClass:"right-5px",attrs:{name:"clock",size:"24px",color:"#ff9198"}})]},proxy:!0}])}),a("van-field",{attrs:{value:t.bill,label:"账单","label-width":"70","input-align":"right",readonly:""},scopedSlots:t._u([{key:"left-icon",fn:function(){return[a("van-icon",{staticClass:"right-5px",attrs:{name:"bill",size:"24px",color:"#d0b862"}})]},proxy:!0}])})],1),a("van-number-keyboard",{attrs:{show:t.show,theme:"custom","extra-key":".","close-button-text":"提交"},on:{blur:function(e){t.show=!1},delete:t.onDelete,close:t.onConfirm},model:{value:t.amounting,callback:function(e){t.amounting=e},expression:"amounting"}}),a("van-calendar",{attrs:{"close-on-popstate":"","close-on-click-overlay":!1,color:"#0e84f8","max-date":t.maxDate,"min-date":t.minDate},on:{confirm:t.onDateSelected},model:{value:t.dateShow,callback:function(e){t.dateShow=e},expression:"dateShow"}})],1)},wa=[],_a=(a("99af"),a("25f0"),{name:"AccountingComp",props:["toWhere","type"],data:function(){return{show:!0,dateShow:!1,amounting:"",beizhu:"",date:"",maxDate:new Date}},computed:{minDate:function(){var t=new Date;return t.setFullYear(t.getFullYear()-1),t},bill:function(){return"personal"===this.toWhere?"个人账单":"家庭账单"}},methods:{onSubmit:function(){var t=this,e="personal"===this.toWhere?"uassets/addbill":"fassets/addbill";this.axios(this.axiosConfig("post",e,{familyid:this.$store.state.familyID,uname:this.$store.state.uname,type:this.type,spending:this.amounting,beizhu:this.beizhu,date:this.date})).then((function(e){"ok"===e.data?(t.$toast.success("提交成功"),t.$router.goBack()):t.$toast.fail(e.data)}))},onDelete:function(){},onConfirm:function(){var t=this;if(""===this.amounting)return this.$toast({message:"金额不能为空",position:"bottom"}),void setTimeout((function(){t.show=!0}),100);this.$refs.AForm.submit()},clickDate:function(){this.show=!1,this.dateShow=!0},onDateSelected:function(t){this.dateShow=!1,this.date=this.formatDate(t),this.show=!0},formatDate:function(t){return"".concat(t.getFullYear(),"年").concat(this.padLeftZero(t.getMonth()+1),"月").concat(this.padLeftZero(t.getDate()),"日")},validateBeizhu:function(t){return t.length<=15},padLeftZero:function(t){var e=t.toString();return("00"+e).substr(e.length)}}}),$a=_a,Da=(a("5801"),Object(l["a"])($a,xa,wa,!1,null,"437a920c",null)),Sa=Da.exports,Ba={name:"AccountingPage",components:{AccountingComp:Sa},data:function(){return{isActive:!0,type:"plus"}},computed:{toWhere:function(){return this.$route.query.type}},methods:{toIncome:function(){this.isActive=!0,this.type="plus",console.log(this.type)},toSpending:function(){this.isActive=!1,this.type="decrease",console.log(this.type)},close:function(){this.$router.goBack()}},mounted:function(){console.log(this.toWhere)}},Fa=Ba,Na=(a("5c06"),Object(l["a"])(Fa,Ca,ka,!1,null,"2fd6105a",null)),Ia=Na.exports,Pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personal-bill"},[a("my-nav-bar",{attrs:{title:"个人账单",fixed:""}}),a("div",{staticClass:"container"},t._l(t.personalData,(function(t,e){return a("bill-card",{key:e,attrs:{PData:t}})})),1)],1)},Ra=[],ja={name:"PersonalBill",components:{MyNavBar:Se,BillCard:Re},data:function(){return{personalData:[]}},created:function(){var t=this;this.axios(this.axiosConfig("get","uassets/getbill",{uname:this.$store.state.uname})).then((function(e){e.data.bill?t.personalData=e.data.bill:t.$toast.fail(e.data)})).catch((function(e){t.$toast.fail(e)}))}},Oa=ja,Aa=(a("acb5"),Object(l["a"])(Oa,Pa,Ra,!1,null,"313ab315",null)),Ea=Aa.exports;m["a"].prototype.goBack=function(){this.isBack=!0,window.history.go(-1)},n["a"].use(m["a"]);var qa=[{path:"/",name:"Login",component:w,beforeEnter:function(t,e,a){localStorage.getItem("uname")?a("/home"):a()}},{path:"/register",name:"Register",component:T,beforeEnter:function(t,e,a){"Login"!=e.name?a("/"):a()}},{path:"/home",name:"Home",component:F,redirect:{name:"assets"},children:[{path:"assets",name:"assets",component:yt},{path:"family",name:"family",component:It},{path:"mine",name:"mine",component:Ut}]},{path:"/setting",name:"Setting",component:Yt},{path:"/about",name:"About",component:ee},{path:"/account",name:"Account",component:re},{path:"/changepasswd",name:"ChangePasswd",component:de},{path:"/userinfo",name:"UserInfo",component:ye},{path:"/familybill",name:"FamilyBill",component:Ee},{path:"/bindfamily",name:"BindFamily",component:Ye},{path:"/createfamily",name:"CreateFamily",component:ra},{path:"/familymanage",name:"FamilyManage",component:da},{path:"/familymembers",name:"FamilyMembers",component:ya},{path:"/acountingpage",name:"AcountingPage",component:Ia},{path:"/personalbill",name:"PersonalBill",component:Ea}],La=new m["a"]({routes:qa}),za=La,Ta=a("2f62");n["a"].use(Ta["a"]);var Ma=new Ta["a"].Store({state:{uname:"",nickname:"",avatar:"",familyID:"",familyName:"",change:0,Fchange:0},mutations:{setServerData:function(t,e){t.uname=e.uname,t.nickname=e.nickname,t.avatar=e.avatar,t.familyID=e.familyID},setFamilyName:function(t,e){t.familyName=e},change:function(t){t.change++},Fchange:function(t){t.Fchange++}},actions:{},modules:{}}),Ua=(a("7371"),a("b970")),Xa=(a("833e"),a("782a"),a("a7fe")),Ha=a.n(Xa),Wa=a("4328"),Za=a.n(Wa),Va=(a("fb6a"),a("53ca"));function Ya(t,e,a){if(null==t)return"";var n="",i=Object(Va["a"])(t);if("string"==i||"number"==i||"boolean"==i)n+="&"+e+"="+(null==a||a?encodeURIComponent(t):t);else for(var s in t){var o=null==e?s:e+(t instanceof Array?"["+s+"]":"."+s);n+=Ya(t[s],o,a)}return n}function Ja(t,e,a){return Ya(t,e,a).slice(1)}var Ga=Ja;j.a.defaults.baseURL="http://192.168.0.105:9527/api",n["a"].use(Ua["a"]),n["a"].use(Ha.a,j.a),n["a"].config.productionTip=!1,n["a"].prototype.axiosConfig=function(t,e,a){return"post"===t?{method:t,headers:{"content-type":"application/x-www-form-urlencoded"},data:Za.a.stringify(a),url:e}:"get"===t?{method:t,url:e+"?"+Ga(a)}:null},new n["a"]({router:za,store:Ma,render:function(t){return t(u)}}).$mount("#app")},5801:function(t,e,a){"use strict";var n=a("9513"),i=a.n(n);i.a},"58c5":function(t,e,a){},"59e7":function(t,e,a){"use strict";var n=a("b6e4"),i=a.n(n);i.a},"5be2":function(t,e,a){"use strict";var n=a("d239"),i=a.n(n);i.a},"5c06":function(t,e,a){"use strict";var n=a("e3bb"),i=a.n(n);i.a},"66dd":function(t,e,a){"use strict";var n=a("7282"),i=a.n(n);i.a},"67c4":function(t,e,a){},7097:function(t,e,a){},7282:function(t,e,a){},7371:function(t,e,a){},"755a":function(t,e,a){"use strict";var n=a("7097"),i=a.n(n);i.a},7650:function(t,e,a){"use strict";var n=a("da3c"),i=a.n(n);i.a},"782a":function(t,e,a){},"7a2f":function(t,e,a){},"7fbe":function(t,e,a){},"81a0":function(t,e,a){"use strict";var n=a("fcf0"),i=a.n(n);i.a},"8ebd":function(t,e,a){},"8f75":function(t,e,a){"use strict";var n=a("67c4"),i=a.n(n);i.a},9513:function(t,e,a){},"9c3a":function(t,e,a){"use strict";var n=a("e81a"),i=a.n(n);i.a},a40f:function(t,e,a){"use strict";var n=a("4239"),i=a.n(n);i.a},a517:function(t,e,a){"use strict";var n=a("1dbb"),i=a.n(n);i.a},a995:function(t,e,a){},a9c7:function(t,e,a){"use strict";var n=a("1540"),i=a.n(n);i.a},acb5:function(t,e,a){"use strict";var n=a("dad7"),i=a.n(n);i.a},b1be:function(t,e,a){},b6e4:function(t,e,a){},b973:function(t,e,a){"use strict";var n=a("7fbe"),i=a.n(n);i.a},be02:function(t,e,a){"use strict";var n=a("a995"),i=a.n(n);i.a},bffd:function(t,e,a){"use strict";var n=a("232b"),i=a.n(n);i.a},c8e2:function(t,e,a){"use strict";var n=a("19b6"),i=a.n(n);i.a},c9cc:function(t,e,a){"use strict";var n=a("1e7d"),i=a.n(n);i.a},cf9c:function(t,e,a){},d239:function(t,e,a){},d3fa:function(t,e,a){},da3c:function(t,e,a){},dad7:function(t,e,a){},e3bb:function(t,e,a){},e81a:function(t,e,a){},fcf0:function(t,e,a){}});
//# sourceMappingURL=app.b1940521.js.map